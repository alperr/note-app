<!DOCTYPE html>
<html lang="en" data-bs-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>List List</title>
    <link href="bootstrap.min.css" rel="stylesheet">
</head>
<body class="p-4">
    <button id="newListBtn" class="btn btn-primary mb-3">New List</button>
    <div id="listList"></div>

    <script>
        const API_BASE = 'http://localhost:3000';

        async function fetchLists() {
            try {
                const response = await fetch(`${API_BASE}/lists`);
                const lists = await response.json();
                displayLists(lists);
            } catch (error) {
                console.error('Error fetching lists:', error);
            }
        }

        function displayLists(lists) {
            const listList = document.getElementById('listList');
            listList.innerHTML = `
                <table class="table table-striped table-hover">
                    <thead>
                        <tr>
                            <th>Name</th>
                            <th>Updated At</th>
                        </tr>
                    </thead>
                    <tbody>
                    </tbody>
                </table>
            `;
            const tbody = listList.querySelector('tbody');
            lists.forEach(list => {
                const row = document.createElement('tr');
                row.style.cursor = 'pointer';

                const nameCell = document.createElement('td');
                nameCell.textContent = list.name;
                row.appendChild(nameCell);

                const updatedCell = document.createElement('td');
                const date = list.updated_at ? new Date(list.updated_at) : null;
                updatedCell.textContent = date && !isNaN(date) ? date.toLocaleString() : 'Unknown';
                row.appendChild(updatedCell);

                row.onclick = () => window.location.href = `edit-list.html?id=${list.id}`;
                tbody.appendChild(row);
            });
        }

        document.getElementById('newListBtn').onclick = () => {
            window.location.href = 'edit-list.html';
        };

        fetchLists();
    </script>
<script src="bootstrap.bundle.min.js"></script>
</body>
</html>